<html>
  <head>
    <script src="jsmind.js"></script>
    <script src="data/tree.js"></script>
    <link type="text/css" rel="stylesheet" href="style/jsmind.css" />
    <link type="text/css" rel="stylesheet" href="style/jsmind_custom.css" />
    <link type="text/css" rel="stylesheet" href="style/layout.css" />
  </head>
  <body>
    <div>
      <div id="key" class="key">
        <img src="graph-viewer-key.png" alt="Graph Viewer Key" width="50%"/>
      </div>
      <div id="jsmind_container" class="graph"></div>
    </div>

    <script src="sketch.js"></script>
    <script type="text/javascript">
      const mind = treeToMind(tree[<%= index %>]);
      const jmOptions = {
        container: 'jsmind_container',
        editable: false,
        theme: 'orange' 
      }
      const jm = new jsMind(jmOptions);
      // Overriding default handlers with our own
      jm.view.add_event(this, 'click', clickHandler);
      // Override the line drawing function with our own
      jm.view.graph.__proto__.draw_line = drawLine;
      jm.view.__proto__.show_lines = showLines;
      render(jm, mind);
      window.addEventListener("message", (event) => {
        render(jm, mind);
      });
    </script>
  </body>
</html> 